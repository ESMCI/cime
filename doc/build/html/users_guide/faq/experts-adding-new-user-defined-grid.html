

<!doctype html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2.3. Adding a user-defined grid &#8212; on  documentation</title>
    
    <link rel="stylesheet" href="../../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="CIME Data Models" href="../../data_models/index.html" />
    <link rel="prev" title="2.2. Setting up a branch or hybrid run" href="basics-setting-up-a-branch-or-hybrid-run.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../data_models/index.html" title="CIME Data Models"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="basics-setting-up-a-branch-or-hybrid-run.html" title="2.2. Setting up a branch or hybrid run"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">on  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >CIME User&#8217;s Guide: Part 1</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="faq.html" accesskey="U">2. FAQ</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="basics-setting-up-a-branch-or-hybrid-run.html"
                        title="previous chapter">2.2. Setting up a branch or hybrid run</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../../data_models/index.html"
                        title="next chapter">CIME Data Models</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/users_guide/faq/experts-adding-new-user-defined-grid.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="adding-a-user-defined-grid">
<span id="faq-user-defined-grid"></span><h1>2.3. Adding a user-defined grid<a class="headerlink" href="#adding-a-user-defined-grid" title="Permalink to this headline">Â¶</a></h1>
<p>CIME is accompanied by support for numerous out-of-the box model resolutions. To see the supported grids call <strong>manange_case &#8211;query-grids</strong>.
In general, CIME model grids are associated with a specific combination of atmosphere, land, land-ice, river-runoff and ocean/ice grids. The naming convention for these grids still only involves atmosphere, land, and ocean/ice grid specifications.</p>
<p>The most common resolutions have the atmosphere and land components on one grid and the ocean and ice on a second grid.
The naming convention looks like <em>f19_g16</em>, where the f19 indicates that the atmosphere and land are on the 1.9x2.5 (finite volume dycore) grid while the g16 means the ocean and ice are on the gx1v6 one-degree displaced pole grid.
While it is not supported, as of CESM1.
.1 does have the ability to run with the atmosphere and land also separated.
The naming convention for these trigrid cases looks like <em>ne30_f19_g16</em>, where the ne30 means that the atmosphere is on the 30-element (spectral-element dycore) grid while the land is still on the finite volume grid and the ocean / ice are still on the gx1v6 grid.
This document will outline how to set up the more complicated trigrid case, but will also highlight what steps can be skipped if the atmosphere and land do not need to be separated.</p>
<p>CIME provides support for you to add your own specific component grid combinations.
To achieve this, CIME has a <code class="docutils literal"><span class="pre">$CIMEROOT/tools/mapping/</span></code>.
A brief list of the steps needed to add a new component grid to the model system follows.
Again, this process can be simplified if the atmosphere and land are running on the same grid.</p>
<ol class="arabic">
<li><p class="first">Start with SCRIP grid files for atmosphere, land, and ocean.
You must first create or obtain SCRIP format grid files for the atmosphere, land and ocean grids. At present there is no supported functionality for creating the SCRIP format file, although that is planned for CESM1.2. (check)</p>
</li>
<li><p class="first">Build the <code class="docutils literal"><span class="pre">check_map</span></code> utility.
When you add new user-defined grid files, you will also need to generate a set of mapping files so the coupler can send data from a component on one grid to a component on another grid. There is an ESMF tool that tests the mapping file by comparing a mapping of a smooth function to its true value on the destination grid. We have tweaked this utility to test a suite of of smooth functions, as well as ensure conservation (when the map is conservative). Before generating mapping functions it is <em>highly recommended</em> that you build this utility.</p>
<p>To build this tool, follow the instructions in <code class="docutils literal"><span class="pre">$CCSMROOT/mapping/check_maps/INSTALL</span></code>. As with many of the steps in this document, you will need to have the <a class="reference external" href="http://www.cesm.ucar.edu/models2.0/external-link-here">ESMF</a> toolkit installed. It is installed by default on most NCAR computers.</p>
</li>
<li><p class="first">Generate <code class="docutils literal"><span class="pre">atm&lt;-&gt;ocn</span></code>, <code class="docutils literal"><span class="pre">atm&lt;-&gt;lnd</span></code>, <code class="docutils literal"><span class="pre">lnd&lt;-&gt;rtm</span></code>, and <code class="docutils literal"><span class="pre">ocn-&gt;lnd</span></code> mapping files.</p>
</li>
</ol>
<p>Using the SCRIP grid files from step one, you must generate a set of conservative (area-averaged) and non-conservative (patch and bilinear) mapping files.
You can do this by calling <strong>gen_cesm_maps.sh</strong> in <code class="docutils literal"><span class="pre">$CCSMROOT/tools/mapping/gen_mapping_files/</span></code>.
This shell script generates all the mapping files needed except rtm-&gt;ocn, which is discussed below.
This script uses the ESMF offline weight generation utility, which you must build <em>prior</em> to running <strong>gen_cesm_maps.sh</strong>.</p>
<p>The <code class="docutils literal"><span class="pre">README</span> <span class="pre">file</span></code> in the <code class="docutils literal"><span class="pre">gen_mapping_files/</span></code> directory contains details on how to run <strong>gen_cesm_maps.sh</strong>. The basic usage is</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>&gt; cd $CCSMROOT/mapping/gen_mapping_files
&gt; ./gen_cesm_maps.sh \
    --fileocn  &lt;input SCRIP ocn_grid full pathname&gt;  \
    --fileatm  &lt;input SCRIP atm grid full pathname&gt;  \
    --filelnd  &lt;input SCRIP lnd grid full pathname&gt;  \
    --filertm  &lt;input SCRIP rtm grid full pathname&gt;  \
    --nameocn  &lt;ocnname in output mapping file&gt; \
    --nameatm  &lt;atmname in output mapping file&gt; \
    --namelnd  &lt;lndname in output mapping file&gt; \
    --namertm  &lt;rtmname in output mapping file&gt;
</pre></div>
</div>
<p>This command will generate the following mapping files:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">map_atmname_TO_ocnname_aave</span><span class="o">.</span><span class="n">yymmdd</span><span class="o">.</span><span class="n">nc</span>
<span class="n">map_atmname_TO_ocnname_blin</span><span class="o">.</span><span class="n">yymmdd</span><span class="o">.</span><span class="n">nc</span>
<span class="n">map_atmname_TO_ocnname_patc</span><span class="o">.</span><span class="n">yymmdd</span><span class="o">.</span><span class="n">nc</span>
<span class="n">map_ocnname_TO_atmname_aave</span><span class="o">.</span><span class="n">yymmdd</span><span class="o">.</span><span class="n">nc</span>
<span class="n">map_ocnname_TO_atmname_blin</span><span class="o">.</span><span class="n">yymmdd</span><span class="o">.</span><span class="n">nc</span>
<span class="n">map_atmname_TO_lndname_aave</span><span class="o">.</span><span class="n">yymmdd</span><span class="o">.</span><span class="n">nc</span>
<span class="n">map_atmname_TO_lndname_blin</span><span class="o">.</span><span class="n">yymmdd</span><span class="o">.</span><span class="n">nc</span>
<span class="n">map_lndname_TO_atmname_aave</span><span class="o">.</span><span class="n">yymmdd</span><span class="o">.</span><span class="n">nc</span>
<span class="n">map_ocnname_TO_lndname_aave</span><span class="o">.</span><span class="n">yymmdd</span><span class="o">.</span><span class="n">nc</span>
<span class="n">map_lndname_TO_rtmname_aave</span><span class="o">.</span><span class="n">yymmdd</span><span class="o">.</span><span class="n">nc</span>
<span class="n">map_rtmname_TO_lndname_aave</span><span class="o">.</span><span class="n">yymmdd</span><span class="o">.</span><span class="n">nc</span>
</pre></div>
</div>
<p>Notes:
- You do not need to specify all four grids. For example, if you are running with the atmosphere and land on the same grid, then you do not need to specify the land grid (and atm&lt;-&gt;rtm maps will be generated). If you also omit the runoff grid, then only the 5 atm&lt;-&gt;ocn maps will be generated.
- ESMF_RegridWeightGen runs in parallel, and the <code class="docutils literal"><span class="pre">gen_cesm_maps.sh</span></code> script has been written to run on yellowstone. To run on any other machine, you may need to add some environment variables to <code class="docutils literal"><span class="pre">$CCSMROOT/mapping/gen_mapping_files/gen_ESMF_mapping_file/create_ESMF_map.sh</span></code> &#8211; search for hostname to see where to edit the file.</p>
<p>Example (run on Nov 5, 2012):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="o">./</span><span class="n">gen_cesm_maps</span><span class="o">.</span><span class="n">sh</span> \
     <span class="o">-</span><span class="n">focn</span> <span class="o">/</span><span class="n">CESM</span><span class="o">/</span><span class="n">cseg</span><span class="o">/</span><span class="n">mapping</span><span class="o">/</span><span class="n">grids</span><span class="o">/</span><span class="n">gx3v7_120309</span><span class="o">.</span><span class="n">nc</span> <span class="o">-</span><span class="n">nocn</span> <span class="n">g37</span> \
     <span class="o">-</span><span class="n">fatm</span> <span class="o">/</span><span class="n">CESM</span><span class="o">/</span><span class="n">cseg</span><span class="o">/</span><span class="n">mapping</span><span class="o">/</span><span class="n">grids</span><span class="o">/</span><span class="n">ne16np4_110512_pentagons</span><span class="o">.</span><span class="n">nc</span> <span class="o">-</span><span class="n">natm</span> <span class="n">ne16np4</span> \
     <span class="o">-</span><span class="n">frtm</span> <span class="o">/</span><span class="n">CESM</span><span class="o">/</span><span class="n">cseg</span><span class="o">/</span><span class="n">mapping</span><span class="o">/</span><span class="n">grids</span><span class="o">/</span><span class="n">r05_nomask_070925</span><span class="o">.</span><span class="n">nc</span> <span class="o">-</span><span class="n">nrtm</span> <span class="n">r05</span>
</pre></div>
</div>
<p>Results in the following files</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">ls</span> <span class="o">-</span><span class="mi">1</span> <span class="nb">map</span><span class="o">*</span>
<span class="n">map_g37_TO_ne16np4_aave</span><span class="o">.</span><span class="mf">121105.</span><span class="n">nc</span>
<span class="n">map_g37_TO_ne16np4_blin</span><span class="o">.</span><span class="mf">121105.</span><span class="n">nc</span>
<span class="n">map_ne16np4_TO_g37_aave</span><span class="o">.</span><span class="mf">121105.</span><span class="n">nc</span>
<span class="n">map_ne16np4_TO_g37_blin</span><span class="o">.</span><span class="mf">121105.</span><span class="n">nc</span>
<span class="n">map_ne16np4_TO_g37_patc</span><span class="o">.</span><span class="mf">121105.</span><span class="n">nc</span>
<span class="n">map_ne16np4_TO_r05_aave</span><span class="o">.</span><span class="mf">121105.</span><span class="n">nc</span>
<span class="n">map_r05_TO_ne16np4_aave</span><span class="o">.</span><span class="mf">121105.</span><span class="n">nc</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li>Generate atmosphere, land and ocean / ice domain files.</li>
</ol>
<p>Using the conservative ocean to land and ocean to atmosphere mapping files created in the previous step, you can create domain files for the atmosphere, land, and ocean; these are basically grid files with consistent masks and fractions. You make these files by calling <strong>gen_domain</strong> in <code class="docutils literal"><span class="pre">$CCSMROOT/mapping/gen_domain_files</span></code>.
The <code class="docutils literal"><span class="pre">INSTALL</span></code> file in the <code class="docutils literal"><span class="pre">gen_domain_files/</span></code> directory contains details on how to build the <strong>gen_domain</strong> executable. After you have built it, the README in the same directory contains details on how to use the tool. The basic usage is:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="o">./</span><span class="n">gen_domain</span> <span class="o">-</span><span class="n">m</span> <span class="o">../</span><span class="n">gen_mapping_files</span><span class="o">/</span><span class="n">map_ocnname_TO_lndname_aave</span><span class="o">.</span><span class="n">yymmdd</span><span class="o">.</span><span class="n">nc</span> <span class="o">-</span><span class="n">o</span> <span class="n">ocnname</span> <span class="o">-</span><span class="n">l</span> <span class="n">lndname</span>
<span class="o">&gt;</span> <span class="o">./</span><span class="n">gen_domain</span> <span class="o">-</span><span class="n">m</span> <span class="o">../</span><span class="n">gen_mapping_files</span><span class="o">/</span><span class="n">map_ocnname_TO_atmname_aave</span><span class="o">.</span><span class="n">yymmdd</span><span class="o">.</span><span class="n">nc</span> <span class="o">-</span><span class="n">o</span> <span class="n">ocnname</span> <span class="o">-</span><span class="n">l</span> <span class="n">atmname</span>
</pre></div>
</div>
<p>These commands will generate the following domain files:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">domain</span><span class="o">.</span><span class="n">lnd</span><span class="o">.</span><span class="n">lndname_ocnname</span><span class="o">.</span><span class="n">yymmdd</span><span class="o">.</span><span class="n">nc</span>
<span class="n">domain</span><span class="o">.</span><span class="n">ocn</span><span class="o">.</span><span class="n">lndname_ocnname</span><span class="o">.</span><span class="n">yymmdd</span><span class="o">.</span><span class="n">nc</span>
<span class="n">domain</span><span class="o">.</span><span class="n">lnd</span><span class="o">.</span><span class="n">atmname_ocnname</span><span class="o">.</span><span class="n">yymmdd</span><span class="o">.</span><span class="n">nc</span>
<span class="n">domain</span><span class="o">.</span><span class="n">ocn</span><span class="o">.</span><span class="n">atmname_ocnname</span><span class="o">.</span><span class="n">yymmdd</span><span class="o">.</span><span class="n">nc</span>
<span class="n">domain</span><span class="o">.</span><span class="n">ocn</span><span class="o">.</span><span class="n">ocnname</span><span class="o">.</span><span class="n">yymmdd</span><span class="o">.</span><span class="n">nc</span>
</pre></div>
</div>
<p>Notes:
- If you are running with the atmosphere and land components on the same grid, you only need to execute <strong>gen_domain</strong> once.
- The input atmosphere grid is assumed to be unmasked (global). Land cells whose fraction is zero will have land mask = 0.
- If the ocean and land grids <em>are identical</em> then the mapping file will simply be unity and the land fraction will be one minus the ocean fraction.</p>
<p>5. If you are adding a new ocn or rtm grid, create a new rtm-&gt;ocn mapping file. (Otherwise you can skip this step.)
The process for mapping from the runoff grid to the ocean grid is currently undergoing many changes. At this time, if you are running with a new ocean or runoff grid, please contact Michael Levy (mlevy_AT_ucar_DOT_edu) for assistance. If you are running with standard ocean and runoff grids, the mapping file should already exist and you do not need to generate it.</p>
<p>6. If you are adding a new new lnd grid, create a new CLM surface dataset. (Otherwise you can skip this step.)
- Generate mapping files for CLM surface dataset (since this is a non-standard grid).</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>&gt; cd $CCSMROOT/models/lnd/clm/tools/mkmapdata
&gt; ./mkmapdata.sh --gridfile &lt;lnd SCRIP grid file&gt; --res &lt;atm resolution name&gt; --gridtype global
</pre></div>
</div>
<ul class="simple">
<li>Generate CLM surface dataset. Below is an example for a current day surface dataset (model year 2000).</li>
</ul>
<dl class="docutils">
<dt>::</dt>
<dd>&gt; cd  $CCSMROOT/models/lnd/clm/tools/mksurfdata_map
&gt; ./mksurfdata.pl -res usrspec -usr_gname &lt;atm resolution name&gt; -usr_gdate yymmdd -y 2000</dd>
</dl>
<p>7. Create grid file needed for create_newcase.
The next step is to create a file - call it <code class="docutils literal"><span class="pre">mygrid.xml</span></code> - with all the grid and domain information. Assuming the domain files that were generated earlier are in <code class="docutils literal"><span class="pre">$DOMAIN_FILE_LOC</span></code>, the contents of this file should be</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;config_horiz_grid&gt;
&lt;horiz_grid GLOB_GRID=&quot;atmgrid&quot; nx=&quot;[size of atmgrid]&quot; ny=&quot;[size of atmgrid]&quot; /&gt;
&lt;horiz_grid GLOB_GRID=&quot;lndgrid&quot; nx=&quot;[size of lndgrid]&quot; ny=&quot;[size of lndgrid]&quot; /&gt;
&lt;horiz_grid GLOB_GRID=&quot;ocngrid&quot; nx=&quot;[size of ocngrid]&quot; ny=&quot;[size of ocngrid]&quot; /&gt;
&lt;horiz_grid GRID=&quot;atmgrid_lndgrid_ocngrid&quot; SHORTNAME=&quot;atm_lnd_ocn&quot;
            ATM_GRID=&quot;atmgrid&quot; LND_GRID=&quot;lndgrid&quot; OCN_GRID=&quot;ocngrid&quot; ICE_GRID=&quot;ocngrid&quot;
            ATM_NCPL=&quot;48&quot; OCN_NCPL=&quot;1&quot;
            ATM_DOMAIN_FILE=&quot;domain.lnd.atmgrid_ocngrid.$YYYYMMDD.nc&quot;
            LND_DOMAIN_FILE=&quot;domain.lnd.lndgrid_ocngrid.$YYYYMMDD.nc&quot;
            ICE_DOMAIN_FILE=&quot;domain.ocn.ocngrid.$YYYYMMDD.nc&quot;
            OCN_DOMAIN_FILE=&quot;domain.ocn.ocngrid.$YYYYMMDD.nc&quot;
            ATM_DOMAIN_PATH=&quot;$DOMAIN_FILE_LOC&quot;
            LND_DOMAIN_PATH=&quot;$DOMAIN_FILE_LOC&quot;
            ICE_DOMAIN_PATH=&quot;$DOMAIN_FILE_LOC&quot;
            OCN_DOMAIN_PATH=&quot;$DOMAIN_FILE_LOC&quot;
            DESC=&quot;Some new trigrid setup&quot; /&gt;
&lt;/config_horiz_grid&gt;
</pre></div>
</div>
<p>Where you only need the GLOB_GRID information for grids that are not already included in the model. For unstructured grids, nx should be the number of grid cells and ny should be 1; for structured grids, they should be the dimensions of the grid.</p>
<ol class="arabic simple" start="8">
<li>Create user_nl_cpl contents for new mapping files.</li>
</ol>
<p>One of the many input files generated for the coupler is <code class="docutils literal"><span class="pre">$RUNDIR/seq_maps.rc</span></code>, which contains a list of mapping files. Using an f09_g16 run on yellowstone as an example, the file will contain the following (for brevity, some lines have been cut):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">atm2ocnFmapname</span><span class="p">:</span> <span class="s1">&#39;/glade/proj3/cseg/inputdata/cpl/cpl6/map_fv0.9x1.25_to_gx1v6_aave_da_090309.nc&#39;</span>
<span class="n">atm2ocnSmapname</span><span class="p">:</span> <span class="s1">&#39;/glade/proj3/cseg/inputdata/cpl/cpl6/map_fv0.9x1.25_to_gx1v6_bilin_da_090309.nc&#39;</span>
<span class="n">atm2ocnVmapname</span><span class="p">:</span> <span class="s1">&#39;/glade/proj3/cseg/inputdata/cpl/cpl6/map_fv0.9x1.25_to_gx1v6_bilin_da_090309.nc&#39;</span>
<span class="n">lnd2atmFmapname</span><span class="p">:</span> <span class="s1">&#39;idmap&#39;</span>
<span class="n">lnd2atmSmapname</span><span class="p">:</span> <span class="s1">&#39;idmap&#39;</span>
<span class="n">lnd2rofFmapname</span><span class="p">:</span> <span class="s1">&#39;/glade/proj3/cseg/inputdata/lnd/clm2/mappingdata/maps/0.9x1.25/map_0.9x1.25_nomask_to_0.5x0.5_nomask_aave_da_c120522.nc&#39;</span>
<span class="n">lnd2rofFmaptype</span><span class="p">:</span> <span class="s1">&#39;X&#39;</span>
<span class="n">ocn2atmFmapname</span><span class="p">:</span> <span class="s1">&#39;/glade/proj3/cseg/inputdata/cpl/cpl6/map_gx1v6_to_fv0.9x1.25_aave_da_090309.nc&#39;</span>
<span class="n">ocn2atmSmapname</span><span class="p">:</span> <span class="s1">&#39;/glade/proj3/cseg/inputdata/cpl/cpl6/map_gx1v6_to_fv0.9x1.25_aave_da_090309.nc&#39;</span>
</pre></div>
</div>
<p>This file is created when you build the model namelists, and the default values are based on the grids specified when you created the case.
The model only knows what default values to use for the out-of-the-box resolutions, so you must specify what maps you have created by appending them to <code class="docutils literal"><span class="pre">$CASE/user_nl_cpl</span></code>.
If, for example, we&#8217;ve introduced a new atmosphere / land grid with a shortname newatm and created all the necessary mapping files in <code class="docutils literal"><span class="pre">$MAPPING_FILE_LOC</span></code>, then to create a newatm_g16 run we would need to add the following to <code class="docutils literal"><span class="pre">$CASE/user_nl_cpl</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">atm2ocnFmapname</span><span class="o">=</span><span class="s1">&#39;$MAPPING_FILE_LOC/map_newatm_TO_gx1v6_aave.21105.nc&#39;</span>
<span class="n">atm2ocnSmapname</span><span class="o">=</span><span class="s1">&#39;$MAPPING_FILE_LOC/map_newatm_TO_gx1v6_blin.121105.nc&#39;</span>
<span class="n">atm2ocnVmapname</span><span class="o">=</span><span class="s1">&#39;$MAPPING_FILE_LOC/map_newatm_TO_gx1v6_patc.121105.nc&#39;</span>
<span class="n">ocn2atmFmapname</span><span class="o">=</span><span class="s1">&#39;$MAPPING_FILE_LOC/map_gx1v6_TO_newatm_aave.121105.nc&#39;</span>
<span class="n">ocn2atmSmapname</span><span class="o">=</span><span class="s1">&#39;$MAPPING_FILE_LOC/map_gx1v6_TO_newatm_aave.121105.nc&#39;</span>
<span class="n">lnd2rofFmapname</span><span class="o">=</span><span class="s1">&#39;$MAPPING_FILE_LOC/map_newatm_TO_r05_aave.121105.nc&#39;</span>
<span class="n">rof2lndFmapname</span><span class="o">=</span><span class="s1">&#39;$MAPPING_FILE_LOC/map_r05_TO_newatm_aave.121105.nc&#39;</span>
</pre></div>
</div>
<p>After running <code class="docutils literal"><span class="pre">$CASE/preview_namelists</span></code> these changes will be reflected in <code class="docutils literal"><span class="pre">$RUNDIR/seq_maps.rc</span></code>.</p>
<ol class="arabic simple" start="9">
<li>Test new grid.</li>
</ol>
<p>Below assume that the new grid is an atmosphere grid.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Test</span> <span class="n">the</span> <span class="n">new</span> <span class="n">grid</span> <span class="k">with</span> <span class="nb">all</span> <span class="n">data</span> <span class="n">components</span><span class="o">.</span>
<span class="p">(</span><span class="n">write</span> <span class="n">an</span> <span class="n">example</span><span class="p">)</span>
<span class="n">Test</span> <span class="n">the</span> <span class="n">new</span> <span class="n">grid</span> <span class="k">with</span> <span class="n">CAM</span><span class="p">(</span><span class="n">newgrid</span><span class="p">),</span> <span class="n">CLM</span><span class="p">(</span><span class="n">newgrid</span><span class="p">),</span> <span class="n">DOCN</span><span class="p">(</span><span class="n">gx1v6</span><span class="p">),</span> <span class="n">DICE</span><span class="p">(</span><span class="n">gx1v6</span><span class="p">)</span>
<span class="p">(</span><span class="n">write</span> <span class="n">an</span> <span class="n">example</span><span class="p">)</span>
</pre></div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../data_models/index.html" title="CIME Data Models"
             >next</a> |</li>
        <li class="right" >
          <a href="basics-setting-up-a-branch-or-hybrid-run.html" title="2.2. Setting up a branch or hybrid run"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">on  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >CIME User&#8217;s Guide: Part 1</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="faq.html" >2. FAQ</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Mariana Vertenstein, Rob Jacob, Jim Edwards, Jim Foucar, Alice Bertini.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.2.
    </div>
  </body>
</html>