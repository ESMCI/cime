<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PIO: examplePio.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PIO
   &#160;<span id="projectnumber">2.4.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d28a4824dc47e487b107a5db32ef43c4.html">examples</a></li><li class="navelem"><a class="el" href="dir_6df6542b1223c38c3752260fabab64d0.html">c</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">examplePio.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A simple C example for the ParallelIO Library.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;config.h&quot;</code><br />
<code>#include &lt;getopt.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;mpi.h&gt;</code><br />
<code>#include &lt;<a class="el" href="pio_8h_source.html">pio.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for examplePio.c:</div>
<div class="dyncontent">
<div class="center"><img src="example_pio_8c__incl.png" border="0" usemap="#example_pio_8c" alt=""/></div>
<map name="example_pio_8c" id="example_pio_8c">
<area shape="rect" id="node8" href="pio_8h.html" title="Public headers for the PIO C interface. " alt="" coords="377,80,427,107"/>
<area shape="rect" id="node11" href="uthash_8h_source.html" title="uthash.h" alt="" coords="477,155,549,181"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a979ddb2d426025010ad5160da5c9e9e8"><td class="memItemLeft" align="right" valign="top">typedef struct examplePioClass&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a></td></tr>
<tr class="memdesc:a979ddb2d426025010ad5160da5c9e9e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds code and data for this example.  <a href="#a979ddb2d426025010ad5160da5c9e9e8">More...</a><br /></td></tr>
<tr class="separator:a979ddb2d426025010ad5160da5c9e9e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a67976bc68369e54b1efe9e7ce5dd1a01"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example_pio_8c.html#a67976bc68369e54b1efe9e7ce5dd1a01">epc_init</a> (struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a> *this)</td></tr>
<tr class="memdesc:a67976bc68369e54b1efe9e7ce5dd1a01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize libraries, create sample data.  <a href="#a67976bc68369e54b1efe9e7ce5dd1a01">More...</a><br /></td></tr>
<tr class="separator:a67976bc68369e54b1efe9e7ce5dd1a01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ce9b9370b529190e132790c49397d9c"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example_pio_8c.html#a5ce9b9370b529190e132790c49397d9c">epc_createDecomp</a> (struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a> *this)</td></tr>
<tr class="memdesc:a5ce9b9370b529190e132790c49397d9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create the decomposition.  <a href="#a5ce9b9370b529190e132790c49397d9c">More...</a><br /></td></tr>
<tr class="separator:a5ce9b9370b529190e132790c49397d9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2ded23cda360951d1c07956f7a5daaf"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example_pio_8c.html#af2ded23cda360951d1c07956f7a5daaf">epc_createFile</a> (struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a> *this)</td></tr>
<tr class="memdesc:af2ded23cda360951d1c07956f7a5daaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create the netCDF file.  <a href="#af2ded23cda360951d1c07956f7a5daaf">More...</a><br /></td></tr>
<tr class="separator:af2ded23cda360951d1c07956f7a5daaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb42e47eeab7ad4ff2dfe165413b59a8"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example_pio_8c.html#adb42e47eeab7ad4ff2dfe165413b59a8">epc_defineVar</a> (struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a> *this)</td></tr>
<tr class="memdesc:adb42e47eeab7ad4ff2dfe165413b59a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define netCDF metadata.  <a href="#adb42e47eeab7ad4ff2dfe165413b59a8">More...</a><br /></td></tr>
<tr class="separator:adb42e47eeab7ad4ff2dfe165413b59a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78a930ccdbecdb78384a415449509cd8"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example_pio_8c.html#a78a930ccdbecdb78384a415449509cd8">epc_writeVar</a> (struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a> *this)</td></tr>
<tr class="memdesc:a78a930ccdbecdb78384a415449509cd8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write the sample data to the file.  <a href="#a78a930ccdbecdb78384a415449509cd8">More...</a><br /></td></tr>
<tr class="separator:a78a930ccdbecdb78384a415449509cd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7b5f59231752c94fee226d7cb5fe7bb"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example_pio_8c.html#ad7b5f59231752c94fee226d7cb5fe7bb">epc_readVar</a> (struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a> *this)</td></tr>
<tr class="memdesc:ad7b5f59231752c94fee226d7cb5fe7bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the example data from the file.  <a href="#ad7b5f59231752c94fee226d7cb5fe7bb">More...</a><br /></td></tr>
<tr class="separator:ad7b5f59231752c94fee226d7cb5fe7bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a953324c74bd13c13537728db07afe2d6"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example_pio_8c.html#a953324c74bd13c13537728db07afe2d6">epc_closeFile</a> (struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a> *this)</td></tr>
<tr class="memdesc:a953324c74bd13c13537728db07afe2d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes the netCDF file.  <a href="#a953324c74bd13c13537728db07afe2d6">More...</a><br /></td></tr>
<tr class="separator:a953324c74bd13c13537728db07afe2d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada6dae318c48313ae2f1d1791de71e82"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example_pio_8c.html#ada6dae318c48313ae2f1d1791de71e82">epc_cleanUp</a> (struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a> *this)</td></tr>
<tr class="memdesc:ada6dae318c48313ae2f1d1791de71e82"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clean up allocated resources.  <a href="#ada6dae318c48313ae2f1d1791de71e82">More...</a><br /></td></tr>
<tr class="separator:ada6dae318c48313ae2f1d1791de71e82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a147d7820aa940c5012d41bb43feba26f"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example_pio_8c.html#a147d7820aa940c5012d41bb43feba26f">epc_errorHandler</a> (struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a> *this, const char *errMsg, const int retVal)</td></tr>
<tr class="memdesc:a147d7820aa940c5012d41bb43feba26f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Error handling function.  <a href="#a147d7820aa940c5012d41bb43feba26f">More...</a><br /></td></tr>
<tr class="separator:a147d7820aa940c5012d41bb43feba26f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7175aa5557459a40cad3acd59b400799"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example_pio_8c.html#a7175aa5557459a40cad3acd59b400799">epc_new</a> (int verbose)</td></tr>
<tr class="memdesc:a7175aa5557459a40cad3acd59b400799"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an examplePioClass object.  <a href="#a7175aa5557459a40cad3acd59b400799">More...</a><br /></td></tr>
<tr class="separator:a7175aa5557459a40cad3acd59b400799"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example_pio_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="memdesc:a0ddf1224851353fc92bfbff6f499fa97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main execution of code.  <a href="#a0ddf1224851353fc92bfbff6f499fa97">More...</a><br /></td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A simple C example for the ParallelIO Library. </p>
<p>This example creates a netCDF output file with one dimension and one variable. It first writes, then reads the sample file using the ParallelIO library.</p>
<p>This example can be run in parallel for 1, 2, 4, 8, or 16 processors. </p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a979ddb2d426025010ad5160da5c9e9e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a979ddb2d426025010ad5160da5c9e9e8">&#9670;&nbsp;</a></span>examplePioClass</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct examplePioClass  examplePioClass</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Holds code and data for this example. </p>
<p>This struct stores pointers to the functions used in the example, and all the data values needed to run the example code. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ada6dae318c48313ae2f1d1791de71e82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada6dae318c48313ae2f1d1791de71e82">&#9670;&nbsp;</a></span>epc_cleanUp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a>* epc_cleanUp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a> *&#160;</td>
          <td class="paramname"><em>this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clean up allocated resources. </p>
<p>This function frees the memory used in this example. It calls the ParallelIO library function <a class="el" href="pio_8h.html#a6416ad3c81a99f31f8f55e857acd697e" title="Free a decomposition map. ">PIOc_freedecomp()</a> to free decomposition resources. Then calles <a class="el" href="group___p_i_o__finalize.html#ga04e150e10a29f037979dc2eaa872bdb5" title="Clean up internal data structures, free MPI resources, and exit the pio library. ">PIOc_finalize()</a> and MPI_finalize() to free library resources.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">this</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">examplePioClass*</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a953324c74bd13c13537728db07afe2d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a953324c74bd13c13537728db07afe2d6">&#9670;&nbsp;</a></span>epc_closeFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a>* epc_closeFile </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a> *&#160;</td>
          <td class="paramname"><em>this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes the netCDF file. </p>
<p>Uses the <a class="el" href="pio_8h.html#aee37be8734afcb8ee94088dc287c341b" title="Close a file previously opened with PIO. ">PIOc_closefile()</a> function to close the netCDF sample file written by this example.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">this</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">examplePioClass*</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5ce9b9370b529190e132790c49397d9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ce9b9370b529190e132790c49397d9c">&#9670;&nbsp;</a></span>epc_createDecomp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a>* epc_createDecomp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a> *&#160;</td>
          <td class="paramname"><em>this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create the decomposition. </p>
<p>This function is called as part of the creation of a sample data file for this example.</p>
<p>Uses <a class="el" href="group___p_i_o__initdecomp.html#ga56c119d47d1082df044968f80acbe265" title="Initialize the decomposition used with distributed arrays. ">PIOc_InitDecomp()</a> to initalize the decomposition for this example. The arguments are:</p><ul>
<li>the ID of the IO system, obtained from PIOc_init_intracomm().</li>
<li>the NetCDF type of the sample data - in this case a 4-byte integer.</li>
<li>the number of dimensions (1).</li>
<li>the lengths of the dimensions.</li>
<li>the number of data elements assigned to each processor.</li>
<li>the array which provides the decomposition mapping.</li>
<li>the IO description pointer.</li>
<li>the ParallelIO rearranger (we are providing NULL here to get the default arranger).</li>
<li>optional array of start values for block cyclic decompositions (NULL means don't use block cyclical decompositions).</li>
<li>optional array of count values for block cyclic decompositions (NULL means don't use block cyclical decompositions).</li>
</ul>
<p>The decomposition mapping array (called compdof, in this example code), contains a 1 based array of offsets into the array record on file. For this example, the compdof array will have the following sizes and values, depending on number of processors used.</p>
<p>For one processor the decomposition array looks like this (note that the array is 1-based):</p>
<pre>
rank: 0 length: 16 [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16]
</pre><p>For two processors, the decomposition array looks like this on each processor:</p>
<pre>
rank: 0 length: 8 [1, 2, 3, 4, 5, 6, 7, 8]
rank: 1 length: 8 [9, 10, 11, 12, 13, 14, 15, 16]
</pre><p>For four processors, the decomposition arrays are:</p>
<pre>
rank: 0 length: 4 [1, 2, 3, 4]
rank: 1 length: 4 [5, 6, 7, 8]
rank: 2 length: 4 [9, 10, 11, 12]
rank: 3 length: 4 [13, 14, 15, 16]
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">this</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">examplePioClass*</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af2ded23cda360951d1c07956f7a5daaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2ded23cda360951d1c07956f7a5daaf">&#9670;&nbsp;</a></span>epc_createFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a>* epc_createFile </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a> *&#160;</td>
          <td class="paramname"><em>this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create the netCDF file. </p>
<p>This function is called as part of the creation of a sample data file for this example.</p>
<p>Uses the function <a class="el" href="group___p_i_o__createfile.html#gaed31e065901c964d4224b3db61a30d5e" title="Create a new file using pio. ">PIOc_createfile()</a> to create the netCDF output file. The format of the file is created in accordance with the iotype member variable, which specifies one of the following values:</p>
<ul>
<li>PIO_IOTYPE_PNETCDF=1 Parallel Netcdf (parallel)</li>
<li>PIO_IOTYPE_NETCDF=2 Netcdf3 Classic format (serial)</li>
<li>PIO_IOTYPE_NETCDF4C=3 NetCDF4 (HDF5) compressed format (serial)</li>
<li>PIO_IOTYPE_NETCDF4P=4 NetCDF4 (HDF5) parallel</li>
</ul>
<p>The <a class="el" href="group___p_i_o__createfile.html#gaed31e065901c964d4224b3db61a30d5e" title="Create a new file using pio. ">PIOc_createfile()</a> function has the following parameters:</p>
<ul>
<li>The IO system ID as set by PIOc_init_intracomm().</li>
<li>A pointer which will get the ncid of this file when it is created.</li>
<li>The iotype (one of the values listed above).</li>
<li>the name of the sample file.</li>
<li>the NetCDF file creating mode, PIO_CLOBBER means overwrite any existing file with this name.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">this</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">examplePioClass*</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adb42e47eeab7ad4ff2dfe165413b59a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb42e47eeab7ad4ff2dfe165413b59a8">&#9670;&nbsp;</a></span>epc_defineVar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a>* epc_defineVar </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a> *&#160;</td>
          <td class="paramname"><em>this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define netCDF metadata. </p>
<p>This function is called as part of the creation of a sample data file for this example.</p>
<p>It defines a dimension and a one-dimensional variable in the netCDF file using functions <a class="el" href="group___p_i_o__def__dim.html#ga19ec254c22fa1822aa86cf69a074c1af" title="The PIO-C interface for the NetCDF function nc_def_dim. ">PIOc_def_dim()</a> and <a class="el" href="group___p_i_o__def__var.html#ga70d1d5b2f5e828fed653ca87aacef16e" title="The PIO-C interface for the NetCDF function nc_def_var. ">PIOc_def_var()</a>. It then calls <a class="el" href="group___p_i_o__enddef.html#ga9967ed940ad4b735965a4abe35101709" title="The PIO-C interface for the NetCDF function nc_enddef. ">PIOc_enddef()</a> to end the define mode of the file.</p>
<p>All of the functions take the pioFileDesc returned by <a class="el" href="group___p_i_o__createfile.html#gaed31e065901c964d4224b3db61a30d5e" title="Create a new file using pio. ">PIOc_createfile()</a>. This is the ncid of the netCDF file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">this</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">examplePioClass*</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a147d7820aa940c5012d41bb43feba26f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a147d7820aa940c5012d41bb43feba26f">&#9670;&nbsp;</a></span>epc_errorHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a>* epc_errorHandler </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a> *&#160;</td>
          <td class="paramname"><em>this</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>errMsg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>retVal</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Error handling function. </p>
<p>On error, process with rank zero will print error message, the netCDF file will be closed with <a class="el" href="pio_8h.html#aee37be8734afcb8ee94088dc287c341b" title="Close a file previously opened with PIO. ">PIOc_closefile()</a>, and MPI_Abort is called to end the example execution on all processes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">this</td><td>Pointer to self. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">errMsg</td><td>an error message </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">retVal</td><td>the non-zero return value that indicated an error </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">examplePioClass*</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a67976bc68369e54b1efe9e7ce5dd1a01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67976bc68369e54b1efe9e7ce5dd1a01">&#9670;&nbsp;</a></span>epc_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a>* epc_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a> *&#160;</td>
          <td class="paramname"><em>this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize libraries, create sample data. </p>
<p>This function is called as part of the creation of a sample data file for this example.</p>
<p>Ths funtion initializes MPI and the ParallelIO libraries. It sets up the ParallelIO library communicator. It also allocates memory for data used in this example, and assigns sample values to the data array that will be written.</p>
<p>The ParallelIO communicator is set up with a call to <a class="el" href="group___p_i_o__init.html#ga479a1d9fe2edfc7ca321a1b482fe0211" title="Library initialization used when IO tasks are a subset of compute tasks. ">PIOc_Init_Intracomm()</a>. This call takes the following parameters:</p>
<ul>
<li>The MPI communicator specifying the invovled processors (MPI_COMM_WORLD, in this case, to use all processors).</li>
<li>The number of I/O tasks. In this example there will be one I/O task for each process.</li>
<li>The stride (1 in this case).</li>
<li>The index of the first I/O task.</li>
<li>The iotype, specifying the flavor of netCDF to use.</li>
<li>Specify the subset rearranger.</li>
<li>A pointer that will get the ID of the ParallelIO system created for this call. This ID will be needed when reading or writing to the file using the ParallelIO library.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">this</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">examplePioClass*</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7175aa5557459a40cad3acd59b400799"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7175aa5557459a40cad3acd59b400799">&#9670;&nbsp;</a></span>epc_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a>* epc_new </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>verbose</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create an examplePioClass object. </p>
<p>This function allocates memory for the struct that contains the code and data for this example. Then pointers are to the functions used in the example.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">verbose</td><td>Non-zero for output to stdout. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">examplePioClass*</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad7b5f59231752c94fee226d7cb5fe7bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7b5f59231752c94fee226d7cb5fe7bb">&#9670;&nbsp;</a></span>epc_readVar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a>* epc_readVar </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a> *&#160;</td>
          <td class="paramname"><em>this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the example data from the file. </p>
<p>This function is called as part of the creation of a sample data file for this example.</p>
<p>This function reads the data that has been written to the sample data file. The data are read with the <a class="el" href="group___p_i_o__read__darray.html#gaa4eb9375a17ec358a88c8e7e388880db" title="Read a field from a file to the IO library. ">PIOc_read_darray()</a> function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">this</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">examplePioClass*</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a78a930ccdbecdb78384a415449509cd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78a930ccdbecdb78384a415449509cd8">&#9670;&nbsp;</a></span>epc_writeVar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a>* epc_writeVar </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="example_pio_8c.html#a979ddb2d426025010ad5160da5c9e9e8">examplePioClass</a> *&#160;</td>
          <td class="paramname"><em>this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write the sample data to the file. </p>
<p>This function is called as part of the creation of a sample data file for this example.</p>
<p>The data are written with the <a class="el" href="group___p_i_o__write__darray.html#gaa40fae759a2a5e39cb7af9b6f024db8f" title="Write a distributed array to the output file. ">PIOc_write_darray()</a> function. After the write is complete, ensure the file is synced for all processes after the write.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">this</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">examplePioClass*</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0ddf1224851353fc92bfbff6f499fa97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ddf1224851353fc92bfbff6f499fa97">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main execution of code. </p>
<p>Executes the functions to:</p><ul>
<li>create a new examplePioClass instance</li>
<li>initialize MPI and the ParallelIO libraries</li>
<li>create the decomposition for this example</li>
<li>create the netCDF output file</li>
<li>define the variable in the file</li>
<li>write data to the variable in the file using decomposition</li>
<li>read the data back from the file using decomposition</li>
<li>close the file</li>
<li>clean up resources</li>
</ul>
<p>The example can be run from the command line (on system that support it) like this: </p><pre>
mpiexec -n 4 ./examplePio
</pre><p>The sample file created by this program is a small netCDF file. It has the following contents (as shown by ncdump) for a 4-processor run:</p>
<pre>
netcdf examplePio_c {
dimensions:
    x = 16 ;
variables:
    int foo(x) ;
data:</pre><pre>    foo = 42, 42, 42, 42, 43, 43, 43, 43, 44, 44, 44, 44, 45, 45, 45, 45 ;
}
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">argc</td><td>argument count (should be zero) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">argv</td><td>argument array (should be NULL) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">examplePioClass*</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun May 19 2019 07:57:01 for PIO by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
