<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1. CIME internals &mdash; CIME 5.4.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '5.4.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="CIME 5.4.0 documentation" href="../index.html" />
    <link rel="up" title="Case Control System Part 1: Basic Usage" href="index.html" />
    <link rel="next" title="2. Creating New Compsets" href="creating-new-compsets.html" />
    <link rel="prev" title="9. Troubleshooting" href="troubleshooting.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="creating-new-compsets.html" title="2. Creating New Compsets"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="troubleshooting.html" title="9. Troubleshooting"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CIME 5.4.0 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Case Control System Part 1: Basic Usage</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="cime-internals">
<span id="id1"></span><h1>1. CIME internals<a class="headerlink" href="#cime-internals" title="Permalink to this headline">¶</a></h1>
<p>The file <strong>$CIMEROOT/config/[cesm,e3sm]/config_files.xml</strong> contains all model-specific information that CIME uses to determine compsets, compset component settings, model grids, machines, batch queue settings, and compiler settings. It contains the following xml nodes, which are discussed below or in subsequent sections of this guide.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">compset</span> <span class="n">definitions</span><span class="p">:</span>
   <span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;COMPSETS_SPEC_FILE&quot;</span><span class="o">&gt;</span>

<span class="n">component</span> <span class="n">specific</span> <span class="n">compset</span> <span class="n">settings</span><span class="p">:</span>
   <span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;CONFIG_CPL_FILE&quot;</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;CONFIG_CPL_FILE_MODEL_SPECIFIC&quot;</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;CONFIG_ATM_FILE&quot;</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;CONFIG_LND_FILE&quot;</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;CONFIG_ROF_FILE&quot;</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;CONFIG_ICE_FILE&quot;</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;CONFIG_OCN_FILE&quot;</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;CONFIG_GLC_FILE&quot;</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;CONFIG_WAV_FILE&quot;</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;CONFIG_ESP_FILE&quot;</span><span class="o">&gt;</span>

<span class="n">pe</span><span class="o">-</span><span class="n">settings</span><span class="p">:</span>
   <span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;PES_SPEC_FILE&quot;</span><span class="o">&gt;</span>

<span class="n">grid</span> <span class="n">definitions</span><span class="p">:</span>
   <span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;GRIDS_SPEC_FILE&quot;</span><span class="o">&gt;</span>

<span class="n">machine</span> <span class="n">specific</span> <span class="n">definitions</span><span class="p">:</span>
   <span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;MACHINES_SPEC_FILE&quot;</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;BATCH_SPEC_FILE&quot;</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;COMPILERS_SPEC_FILE&quot;</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;PIO_SPEC_FILE&quot;</span><span class="o">&gt;</span>

<span class="n">testing</span><span class="p">:</span>
   <span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;CONFIG_TESTS_FILE&quot;</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;TESTS_SPEC_FILE&quot;</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;TESTS_MODS_DIR&quot;</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;SYSTEM_TESTS_DIR&quot;</span><span class="o">&gt;</span>

<span class="n">archiving</span><span class="p">:</span>
   <span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;LTARCHIVE_SPEC_FILE&quot;</span><span class="o">&gt;</span>

<span class="n">CIME</span> <span class="n">components</span> <span class="n">namelists</span> <span class="n">definitions</span><span class="p">:</span>
   <span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;NAMELIST_DEFINITION_FILE&quot;</span><span class="o">&gt;</span>

<span class="n">user</span><span class="o">-</span><span class="n">mods</span> <span class="n">directories</span><span class="p">:</span>
   <span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;USER_MODS_DIR&quot;</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="section" id="where-are-compsets-defined">
<span id="defining-compsets"></span><h2>1.1. Where are compsets defined?<a class="headerlink" href="#where-are-compsets-defined" title="Permalink to this headline">¶</a></h2>
<p>In CIME, multiple components can define compsets that are targeted to their model development needs.</p>
<p>Each component supports a set of compset longnames that are used in testing and supported in out of the box configurations.</p>
<p>To determine if the compset name to <strong>create_newcase</strong> is a supported component, CIME looks in the <strong>config_files.xml</strong> file and parses the
the xml element <code class="docutils literal"><span class="pre">COMPSETS_SPEC_FILE</span></code> in order to determine which component is defining the compset.</p>
<p>In the case of CESM, this xml element has the contents shown here, where <code class="docutils literal"><span class="pre">$SRCROOT</span></code> is the root of your CESM sandbox and contains <code class="docutils literal"><span class="pre">$CIMEROOT</span></code> as a subdirectory:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>&lt;entry id=&quot;COMPSETS_SPEC_FILE&quot;&gt;
  &lt;type&gt;char&lt;/type&gt;
  &lt;default_value&gt;unset&lt;/default_value&gt;
  &lt;values&gt;
    &lt;value component=&quot;allactive&quot;&gt;$SRCROOT/cime_config/config_compsets.xml&lt;/value&gt;
    &lt;value component=&quot;drv&quot;      &gt;$CIMEROOT/src/drivers/mct/cime_config/config_compsets.xml&lt;/value&gt;
    &lt;value component=&quot;cam&quot;      &gt;$SRCROOT/components/cam/cime_config/config_compsets.xml&lt;/value&gt;
    &lt;value component=&quot;cism&quot;     &gt;$SRCROOT/components/cism/cime_config/config_compsets.xml&lt;/value&gt;
    &lt;value component=&quot;clm&quot;      &gt;$SRCROOT/components/clm/cime_config/config_compsets.xml&lt;/value&gt;
    &lt;value component=&quot;cice&quot;     &gt;$SRCROOT/components/cice/cime_config/config_compsets.xml&lt;/value&gt;
    &lt;value component=&quot;pop&quot;      &gt;$SRCROOT/components/pop/cime_config/config_compsets.xml&lt;/value&gt;
  &lt;/values&gt;
  &lt;group&gt;case_last&lt;/group&gt;
  &lt;file&gt;env_case.xml&lt;/file&gt;
  &lt;desc&gt;file containing specification of all compsets for primary component (for documentation only - DO NOT EDIT)&lt;/desc&gt;
  &lt;schema&gt;$CIMEROOT/config/xml_schemas/config_compsets.xsd&lt;/schema&gt;
&lt;/entry&gt;
</pre></div>
</div>
</div>
<div class="section" id="how-is-the-long-compset-name-parsed">
<span id="defining-component-specific-compset-settings"></span><h2>1.2. How is the long compset name parsed?<a class="headerlink" href="#how-is-the-long-compset-name-parsed" title="Permalink to this headline">¶</a></h2>
<p>Every model component contains a <strong>config_component.xml</strong> file that has two functions:</p>
<ol class="arabic simple">
<li>Specifying the component-specific definitions of what can appear after the <code class="docutils literal"><span class="pre">%</span></code> in the compset longname, (for example, <code class="docutils literal"><span class="pre">DOM</span></code> in <code class="docutils literal"><span class="pre">DOCN%DOM</span></code>).</li>
<li>Specifying the compset-specific <code class="docutils literal"><span class="pre">$CASEROOT</span></code> xml variables.</li>
</ol>
<p>CIME first parses the following nodes to identify appropriate <strong>config_component.xml</strong> files for the driver. There are two such files; one is model-independent and the other is model-specific.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>&lt;entry id=&quot;CONFIG_CPL_FILE&quot;&gt;
   ...
   &lt;default_value&gt;$CIMEROOT/driver_cpl/cime_config/config_component.xml&lt;/default_value&gt;
   ..
   &lt;/entry&gt;

  &lt;entry id=&quot;CONFIG_CPL_FILE_MODEL_SPECIFIC&quot;&gt;
     &lt;default_value&gt;$CIMEROOT/driver_cpl/cime_config/config_component_$MODEL.xml&lt;/default_value&gt;
  &lt;/entry&gt;
</pre></div>
</div>
<p>CIME then parses each of the nodes listed below, using using the value of the <em>component</em> attribute to determine which xml files to use for the requested compset longname.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;CONFIG_ATM_FILE&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;CONFIG_ESP_FILE&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;CONFIG_ICE_FILE&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;CONFIG_GLC_FILE&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;CONFIG_LND_FILE&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;CONFIG_OCN_FILE&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;CONFIG_ROF_FILE&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;CONFIG_WAV_FILE&quot;</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>As an example, the possible atmosphere components for CESM have the following associated xml files.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>&lt;entry id=&quot;CONFIG_ATM_FILE&quot;&gt;
  &lt;type&gt;char&lt;/type&gt;
  &lt;default_value&gt;unset&lt;/default_value&gt;
  &lt;values&gt;
    &lt;value component=&quot;cam&quot; &gt;$SRCROOT/components/cam/cime_config/config_component.xml&lt;/value&gt;
    &lt;value component=&quot;datm&quot;&gt;$CIMEROOT/components/data_comps/datm/cime_config/config_component.xml&lt;/value&gt;
    &lt;value component=&quot;satm&quot;&gt;$CIMEROOT/components/stub_comps/satm/cime_config/config_component.xml&lt;/value&gt;
    &lt;value component=&quot;xatm&quot;&gt;$CIMEROOT/components/xcpl_comps/xatm/cime_config/config_component.xml&lt;/value&gt;
  &lt;/values&gt;
  &lt;group&gt;case_last&lt;/group&gt;
  &lt;file&gt;env_case.xml&lt;/file&gt;
  &lt;desc&gt;file containing specification of component specific definitions and values(for documentation only - DO NOT EDIT)&lt;/desc&gt;
  &lt;schema&gt;$CIMEROOT/cime_config/xml_schemas/entry_id.xsd&lt;/schema&gt;
&lt;/entry&gt;
</pre></div>
</div>
<p>If the compset&#8217;s atm component attribute is <code class="docutils literal"><span class="pre">datm</span></code>, the file <code class="docutils literal"><span class="pre">$CIMEROOT/components/data_comps/datm/cime_config/config_component.xml</span></code> specifies all possible component settings for <code class="docutils literal"><span class="pre">DATM</span></code>.</p>
<p>The schema for every <strong>config_component.xml</strong> file has a <code class="docutils literal"><span class="pre">&lt;description&gt;</span></code> node that specifies all possible values that can follow the <code class="docutils literal"><span class="pre">%</span></code> character in the compset name. To list the possible values, use the <strong>query_case</strong> command with <code class="docutils literal"><span class="pre">--components</span></code> as shown in this example for CAM:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">query_case</span> <span class="o">--</span><span class="n">components</span> <span class="n">cam</span>
</pre></div>
</div>
</div>
<div class="section" id="where-are-pe-settings-defined-for-the-target-compset-and-model-grid">
<span id="defining-pes"></span><h2>1.3. Where are pe-settings defined for the target compset and model grid?<a class="headerlink" href="#where-are-pe-settings-defined-for-the-target-compset-and-model-grid" title="Permalink to this headline">¶</a></h2>
<p>CIME looks at the xml element <code class="docutils literal"><span class="pre">PES_SPEC_FILE</span></code> in the <strong>config_files.xml</strong> file to determine where
to find the supported out-of-the-box model grids for the target component.</p>
<p>Each component that sets compsets has an associated <strong>config_pes.xml</strong> file that specifies an out-of-the-box pe-layout for those compsets.
The pe-layout might also have dependencies on the model grid and the target machine.
Finally, there might be more than one out-of-the-box pe-layout that could be used for a compset/grid/machine combination: one for a low processor setting and one for a high processor setting.</p>
<p>A typical entry in <strong>config_pes.xml</strong> looks like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">grid</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;a%T62&quot;</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">mach</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;cheyenne&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">pes</span> <span class="n">pesize</span><span class="o">=</span><span class="s2">&quot;any&quot;</span> <span class="n">compset</span><span class="o">=</span><span class="s2">&quot;DATM%IAF&quot;</span><span class="o">&gt;</span>
    <span class="o">.......</span>
    <span class="o">&lt;/</span><span class="n">pes</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">mach</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">grid</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Given the various dependencies, CIME uses an order of precedence to determine the optimal match. This order is as follows:</p>
<ol class="arabic">
<li><p class="first">grid match</p>
<p>CIME first searches the grid nodes for a grid match in <strong>config_grids.xml</strong>.
The search is based on a regular expression match for the grid longname.
All nodes that have a grid match are used in the subsequent search. If there is no grid match, all nodes that have <code class="docutils literal"><span class="pre">&lt;grid</span> <span class="pre">name=&quot;any&quot;&gt;</span></code> are used in the subsequent search.</p>
</li>
<li><p class="first">machine match</p>
<p>CIME next uses the list of nodes obtained in the grid match to search for the machine name using the <code class="docutils literal"><span class="pre">&lt;mach&gt;</span></code> nodes. If there is no machine match, then all nodes with <code class="docutils literal"><span class="pre">&lt;machine</span> <span class="pre">name=&quot;any&quot;&gt;</span></code> are used in the subsequent search.</p>
</li>
<li><p class="first">pesize and compset match</p>
<p>CIME next uses the list of nodes obtained in the machine match to search for pesize and compset using the <code class="docutils literal"><span class="pre">&lt;pes&gt;</span></code> nodes. If there is no match, the node with <code class="docutils literal"><span class="pre">&lt;pes</span> <span class="pre">pesize=&quot;any&quot;</span> <span class="pre">compset=&quot;any&quot;&gt;</span></code> is used.</p>
</li>
</ol>
<p>The <strong>create_newcase</strong> script outputs the matches that are found in determining the best out-of-the-box pe-layout.</p>
</div>
<div class="section" id="where-are-model-grids-defined">
<span id="defining-model-grids"></span><h2>1.4. Where are model grids defined?<a class="headerlink" href="#where-are-model-grids-defined" title="Permalink to this headline">¶</a></h2>
<p>CIME looks at the xml node <code class="docutils literal"><span class="pre">GRIDS_SPEC_FILE</span></code> in the <strong>config_files.xml</strong> file to identify supported out-of-the-box model grids for the target model. The node has the following contents:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>&lt;entry id=&quot;GRIDS_SPEC_FILE&quot;&gt;
  &lt;type&gt;char&lt;/type&gt;
  &lt;default_value&gt;$CIMEROOT/cime_config/$MODEL/config_grids.xml&lt;/default_value&gt;
  &lt;group&gt;case_last&lt;/group&gt;
  &lt;file&gt;env_case.xml&lt;/file&gt;
  &lt;desc&gt;file containing specification of all supported model grids, domains and mapping files (for documentation only - DO NOT EDIT)&lt;/desc&gt;
  &lt;schema&gt;$CIMEROOT/cime_config/xml_schemas/config_grids_v2.xsd&lt;/schema&gt;
&lt;/entry&gt;
</pre></div>
</div>
</div>
<div class="section" id="where-are-machines-defined">
<span id="defining-machines"></span><h2>1.5. Where are machines defined?<a class="headerlink" href="#where-are-machines-defined" title="Permalink to this headline">¶</a></h2>
<p>CIME looks at the xml node <code class="docutils literal"><span class="pre">MACHINE_SPEC_FILE</span></code> in the <strong>config_files.xml</strong> file to identify supported out-of-the-box machines for the target model. The node has the following contents:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>&lt;entry id=&quot;MACHINES_SPEC_FILE&quot;&gt;
  &lt;type&gt;char&lt;/type&gt;
  &lt;default_value&gt;$CIMEROOT/cime_config/$MODEL/machines/config_machines.xml&lt;/default_value&gt;
  &lt;group&gt;case_last&lt;/group&gt;
  &lt;file&gt;env_case.xml&lt;/file&gt;
  &lt;desc&gt;file containing machine specifications for target model primary component (for documentation only - DO NOT EDIT)&lt;/desc&gt;
  &lt;schema&gt;$CIMEROOT/cime_config/xml_schemas/config_machines.xsd&lt;/schema&gt;
&lt;/entry&gt;
</pre></div>
</div>
<p>When porting, you will need to <a class="reference internal" href="porting-cime.html#customizing-machine-file"><span class="std std-ref">customize the config_machines.xml file</span></a>.</p>
</div>
<div class="section" id="where-are-batch-system-settings-defined">
<span id="defining-the-batch-system"></span><h2>1.6. Where are batch system settings defined?<a class="headerlink" href="#where-are-batch-system-settings-defined" title="Permalink to this headline">¶</a></h2>
<p>CIME looks at the xml node <code class="docutils literal"><span class="pre">BATCH_SPEC_FILE</span></code> in the <strong>config_files.xml</strong> file to identify supported out-of-the-box batch system details for the target model. The node has the following contents:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>&lt;entry id=&quot;BATCH_SPEC_FILE&quot;&gt;
  &lt;type&gt;char&lt;/type&gt;
  &lt;default_value&gt;$CIMEROOT/cime_config/$MODEL/machines/config_batch.xml&lt;/default_value&gt;
  &lt;group&gt;case_last&lt;/group&gt;
  &lt;file&gt;env_case.xml&lt;/file&gt;
  &lt;desc&gt;file containing batch system details for target system  (for documentation only - DO NOT EDIT)&lt;/desc&gt;
  &lt;schema&gt;$CIMEROOT/cime_config/xml_schemas/config_batch.xsd&lt;/schema&gt;
&lt;/entry&gt;
</pre></div>
</div>
<p>When porting, you will need to <a class="reference internal" href="porting-cime.html#customizing-batch-file"><span class="std std-ref">customize the config_batch.xml file</span></a>.</p>
</div>
<div class="section" id="where-are-compiler-settings-defined">
<span id="defining-compiler-settings"></span><h2>1.7. Where are compiler settings defined?<a class="headerlink" href="#where-are-compiler-settings-defined" title="Permalink to this headline">¶</a></h2>
<p>CIME looks at the xml element <code class="docutils literal"><span class="pre">COMPILERS_SPEC_FILE</span></code> in the <strong>config_files.xml</strong> file to identify supported out-of-the-box compiler details for the target model. The node has the following contents:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>&lt;entry id=&quot;COMPILERS_SPEC_FILE&quot;&gt;
  &lt;type&gt;char&lt;/type&gt;
  &lt;default_value&gt;$CIMEROOT/cime_config/$MODEL/machines/config_compilers.xml&lt;/default_value&gt;
  &lt;group&gt;case_last&lt;/group&gt;
  &lt;file&gt;env_case.xml&lt;/file&gt;
  &lt;desc&gt;file containing compiler specifications for target model primary component (for documentation only - DO NOT EDIT)&lt;/desc&gt;
  &lt;schema&gt;$CIMEROOT/cime_config/xml_schemas/config_compilers_v2.xsd&lt;/schema&gt;
&lt;/entry&gt;
</pre></div>
</div>
<p>When porting, you will need to <a class="reference internal" href="porting-cime.html#customizing-compiler-file"><span class="std std-ref">customize the config_compilers.xml file</span></a>.</p>
</div>
<div class="section" id="customizing-cime-for-your-needs">
<span id="customizing-cime"></span><h2>1.8. Customizing CIME For Your Needs<a class="headerlink" href="#customizing-cime-for-your-needs" title="Permalink to this headline">¶</a></h2>
<p>CIME recognizes a user-created custom configuration directory, <code class="docutils literal"><span class="pre">$HOME/.cime</span></code>. The contents of this directory may include any one of the following list of files:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">config</span></code></p>
<blockquote>
<div><p>This file must have a format which follows the python config format. See <a class="reference external" href="https://wiki.python.org/moin/ConfigParserExamples">Python Config Parser Examples</a></p>
<p>In the [main] block you can set the following variables:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">CIME_MODEL=[e3sm,</span> <span class="pre">cesm]</span></code></p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">PROJECT=&lt;account</span> <span class="pre">number&gt;</span></code></p>
<p>This is your project account code for batch submission and/or directory priveleges</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">CHARGE_ACCOUNT=&lt;account</span> <span class="pre">number&gt;</span></code></p>
<p>An alternative to PROJECT for batch charging&gt;</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">MAIL_USER=&lt;email</span> <span class="pre">address&gt;</span></code></p>
<p>Used request a non-default email for batch summary output</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">MAIL_TYPE=[never,all,begin,fail,end]</span></code></p>
</li>
</ul>
<blockquote>
<div><p>Any <strong>or</strong> all the above valid values can be set to list the batch events that emails will be sent for.</p>
</div></blockquote>
<ul>
<li><p class="first"><strong>create_test</strong> input arguments</p>
<p>Any argument to the <strong>create_test</strong> script can have its default changed by listing it here with the new default.</p>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">config_machines.xml</span></code></p>
<p>This file must the same format as <code class="docutils literal"><span class="pre">$CIMEROOT/config/$model/machines/config_machines.xml</span></code> with the appropriate definitions for your machine.</p>
<p>If you have a customized version of this file in <code class="docutils literal"><span class="pre">$HOME/.cime</span></code>, it will <strong>append</strong> to the file in <code class="docutils literal"><span class="pre">$CIMEROOT/config/$model/machines/config_machines.xml</span></code>.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">config_compilers.xml</span></code></p>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">Add content for config_compilers.xml</p>
</div>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">config_batch.xml</span></code></p>
<div class="admonition-todo admonition" id="index-1">
<p class="first admonition-title">Todo</p>
<p class="last">Add content for config_batch.xml</p>
</div>
</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">1. CIME internals</a><ul>
<li><a class="reference internal" href="#where-are-compsets-defined">1.1. Where are compsets defined?</a></li>
<li><a class="reference internal" href="#how-is-the-long-compset-name-parsed">1.2. How is the long compset name parsed?</a></li>
<li><a class="reference internal" href="#where-are-pe-settings-defined-for-the-target-compset-and-model-grid">1.3. Where are pe-settings defined for the target compset and model grid?</a></li>
<li><a class="reference internal" href="#where-are-model-grids-defined">1.4. Where are model grids defined?</a></li>
<li><a class="reference internal" href="#where-are-machines-defined">1.5. Where are machines defined?</a></li>
<li><a class="reference internal" href="#where-are-batch-system-settings-defined">1.6. Where are batch system settings defined?</a></li>
<li><a class="reference internal" href="#where-are-compiler-settings-defined">1.7. Where are compiler settings defined?</a></li>
<li><a class="reference internal" href="#customizing-cime-for-your-needs">1.8. Customizing CIME For Your Needs</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="troubleshooting.html"
                        title="previous chapter">9. Troubleshooting</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="creating-new-compsets.html"
                        title="next chapter">2. Creating New Compsets</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/users_guide/cime-internals.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="creating-new-compsets.html" title="2. Creating New Compsets"
             >next</a> |</li>
        <li class="right" >
          <a href="troubleshooting.html" title="9. Troubleshooting"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CIME 5.4.0 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Case Control System Part 1: Basic Usage</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2017, U.S. National Science Foundation and U.S. Department of Energy.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.3.
    </div>
  </body>
</html>