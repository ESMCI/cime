<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>3. Porting and validating CIME on a new platform &mdash; CIME 5.4.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '5.4.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="CIME 5.4.0 documentation" href="../index.html" />
    <link rel="up" title="CIME User’s Guide Part 1: Beginner - Basic Usage" href="index.html" />
    <link rel="next" title="4. Optimizing Processor Layout" href="optimizing-processor-layout.html" />
    <link rel="prev" title="2. Creating New Compsets" href="creating-new-compsets.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="optimizing-processor-layout.html" title="4. Optimizing Processor Layout"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="creating-new-compsets.html" title="2. Creating New Compsets"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CIME 5.4.0 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">CIME User&#8217;s Guide Part 1: Beginner - Basic Usage</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="porting-and-validating-cime-on-a-new-platform">
<span id="porting"></span><h1>3. Porting and validating CIME on a new platform<a class="headerlink" href="#porting-and-validating-cime-on-a-new-platform" title="Permalink to this headline">¶</a></h1>
<p>One of the first steps for many users is getting CIME-based models running on their local machine.
This section describes that process.</p>
<div class="section" id="required-libraries-packages">
<h2>3.1. Required libraries/packages<a class="headerlink" href="#required-libraries-packages" title="Permalink to this headline">¶</a></h2>
<p>The machine needs to have:</p>
<ul class="simple">
<li>a functioning MPI environment (unless you plan to run on a single core with the CIME mpi-serial library).</li>
<li>build tools gmake and cmake,</li>
<li>a netcdf library version 4.3 or newer built with the same compiler you will use for CIME.</li>
</ul>
<p>A pnetcdf library is optional.</p>
<p>If you are using MPI, make sure you can run a basic MPI parallel program on your machine before you attempt a CIME port. You can use this <a class="reference internal" href="use_cases/basics-mpi-example.html#mpi-example"><span class="std std-ref">MPI example</span></a> to check.</p>
</div>
<div class="section" id="steps-for-porting">
<h2>3.2. Steps for porting<a class="headerlink" href="#steps-for-porting" title="Permalink to this headline">¶</a></h2>
<p>Porting CIME involves several steps in which you create, at a minimum, a <strong>config_machines.xml</strong> file in your <strong>$HOME/.cime</strong> directory.
In addition, if you have a batch system, you will also need to add a <strong>config_batch.xml</strong> file to your <strong>$HOME/.cime</strong> directory.</p>
<p>All files in <strong>$HOME/.cime/</strong> are appended to the xml objects that are read into memory from the <strong>$CIME/config/[model]</strong>, where <strong>[model]</strong> is either <code class="docutils literal"><span class="pre">e3sm</span></code> or <code class="docutils literal"><span class="pre">cesm</span></code>.</p>
<p>Follow these steps:</p>
<ol class="arabic">
<li><p class="first">Create a <strong>$HOME/.cime</strong> directory</p>
</li>
<li><p class="first">Create a <strong>config</strong> file in that directory. It should contain the following two lines:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">main</span><span class="p">]</span>
<span class="n">CIME_MODEL</span><span class="o">=</span><span class="n">cesm</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">main</span><span class="p">]</span>
<span class="n">CIME_MODEL</span><span class="o">=</span><span class="n">e3sm</span>
</pre></div>
</div>
</li>
<li><p class="first">Create a <strong>config_machines.xml</strong> file in the same directory.</p>
<p>This file contains all the information you need to set in order to configure a new machine to be CIME-compliant.</p>
<p>Use one of the templates described here to create the file.</p>
<ul class="simple">
<li>If you are on a MAC and have the libraries installed with either MacPorts or HomeBrew, copy
<strong>$CIME/config/cesm/machines/userdefined_laptop_template/config_machines.xml</strong> to
<strong>$HOME/.cime/config_machines.xml</strong>.</li>
<li>Otherwise, copy <strong>$CIME/config/xml_schemas/config_machines_template.xml</strong> to
<strong>$HOME/.cime/config_machines.xml</strong>.</li>
</ul>
<p>Fill in the contents of <strong>$HOME/.cime/config_machines.xml</strong> that are specific to your machine. For more details see <a class="reference internal" href="#customizing-machine-file"><span class="std std-ref">customize the config_machines.xml file</span></a>.</p>
<p>Check to ensure that your <strong>config_machines.xml</strong> file conforms to the CIME schema definition by doing the following:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>xmllint --noout --schema $CIME/config/xml_schemas/config_machines.xsd $HOME/.cime/config_machines.xml
</pre></div>
</div>
</li>
<li><p class="first">If you have compiler settings that are specific to your machine, create a <strong>$HOME/.cime/config_compilers.xml</strong> file.</p>
<p>The default compiler settings are set in <strong>$CIME/config/[model]/machines/config_compilers.xml</strong>, where <strong>[model]</strong> can be either <code class="docutils literal"><span class="pre">e3sm</span></code> or <code class="docutils literal"><span class="pre">cesm</span></code>.</p>
<p>There is no template for <strong>config_compilers.xml</strong>.</p>
</li>
<li><p class="first">If you have a batch system, create a <strong>$HOME/.cime/config_batch.xml</strong> file.</p>
</li>
</ol>
<blockquote>
<div>Out-of-the-box batch settings are set in <strong>$CIME/config/[model]/machines/config_batch.xml</strong>, where <strong>[model]</strong> can be either <code class="docutils literal"><span class="pre">e3sm</span></code> or <code class="docutils literal"><span class="pre">cesm</span></code>.</div></blockquote>
<ol class="arabic simple">
<li>Once you have defined a basic configuration for your machine in your <strong>$HOME/.cime</strong> xml files, run <strong>scripts_regression_test.py</strong> interactively from the <strong>$CIME/scripts/tests</strong> directory.
This performs a number of basic unit tests starting from the simplest and working toward more complicated ones.</li>
</ol>
<dl class="docutils">
<dt>After running those steps correctly, you are ready to try a case at your target compset and resolution.</dt>
<dd>Once you have successfully created the required xml files in your .cime directory and are satisfied with the results you can merge them into the default files in the <strong>config/$CIME_MODEL/machines</strong> directory.
If you would like to make this machine definition available generally you may then issue a pull request to add your changes to the git repository.</dd>
</dl>
</div>
<div class="section" id="config-machines-xml-machine-specific-file">
<span id="customizing-machine-file"></span><h2>3.3. config_machines.xml - machine specific file<a class="headerlink" href="#config-machines-xml-machine-specific-file" title="Permalink to this headline">¶</a></h2>
<p>The machine-specific file is defined in the model-specific <a class="reference internal" href="cime-internals.html#defining-machines"><span class="std std-ref">config_machines.xml</span></a>.</p>
<p>To make a machine CIME-compatible, add the appropriate entries for the machine in <strong>config_machines.xml</strong>.</p>
<p>Each <code class="docutils literal"><span class="pre">&lt;machine&gt;</span></code> tag requires the following input:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">DESC</span></code>: a text description of the machine</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">NODENAME_REGEX</span></code>: a regular expression used to identify the machine. It must work on compute nodes as well as login nodes. Use the <code class="docutils literal"><span class="pre">machine</span></code> option for <strong>create_test</strong> or <strong>create_newcase</strong> if this flag is not available.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">OS</span></code>: the machine&#8217;s operating system</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">PROXY</span></code>: optional http proxy for access to the internet</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">COMPILERS</span></code>: compilers supported on the machine, in comma-separated list, default first</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">MPILIBS</span></code>: mpilibs supported on the machine, in comma-separated list, default first</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">PROJECT</span></code>: a project or account number used for batch jobs; can be overridden in environment or in <strong>$HOME/.cime/config</strong></p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">SAVE_TIMING_DIR</span></code>: (E3SM only) target directory for archiving timing output</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">SAVE_TIMING_DIR_PROJECTS</span></code>: (ACME only) projects whose jobs archive timing output</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">CIME_OUTPUT_ROOT</span></code>: Base directory for case output; the <strong>bld</strong> and <strong>run</strong> directories are written below here</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">DIN_LOC_ROOT</span></code>: location of the input data directory</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">DIN_LOC_ROOT_CLMFORC</span></code>: optional input location for clm forcing data</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">DOUT_S_ROOT</span></code>: root directory of short-term archive files</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">DOUT_L_MSROOT</span></code>: root directory on mass store system for long-term archive files</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">BASELINE_ROOT</span></code>: root directory for system test baseline files</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">CCSM_CPRNC</span></code>: location of the cprnc tool, which compares model output in testing</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">GMAKE</span></code>: gnu-compatible make tool; default is &#8220;gmake&#8221;</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">GMAKE_J</span></code>: optional number of threads to pass to the gmake flag</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">TESTS</span></code>: (E3SM only) list of tests to run on the machine</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">BATCH_SYSTEM</span></code>: batch system used on this machine (none is okay)</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">SUPPORTED_BY</span></code>: contact information for support for this system</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">MAX_TASKS_PER_NODE</span></code>: maximum number of threads/tasks per shared memory node on the machine</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">MAX_MPITASKS_PER_NODE</span></code>: number of physical PES per shared node on the machine. In practice the MPI tasks per node will not exceed this value.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">PROJECT_REQUIRED</span></code>: Does this machine require a project to be specified to the batch system?</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">mpirun</span></code>: The mpi exec to start a job on this machine.
This is itself an element that has sub-elements that must be filled:</p>
<ul class="simple">
<li>Must have a required <code class="docutils literal"><span class="pre">&lt;executable&gt;</span></code> element</li>
<li>May have optional attributes of <code class="docutils literal"><span class="pre">compiler</span></code>, <code class="docutils literal"><span class="pre">mpilib</span></code> and/or <code class="docutils literal"><span class="pre">threaded</span></code></li>
<li>May have an optional <code class="docutils literal"><span class="pre">&lt;arguments&gt;</span></code> element which in turn contains one or more <code class="docutils literal"><span class="pre">&lt;arg&gt;</span></code> elements.
These specify the arguments to the mpi executable and are dependent on your mpi library implementation.</li>
</ul>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">module_system</span></code>: How and what modules to load on this system. Module systems allow you to easily load multiple compiler environments on a machine. CIME provides support for two types of module tools: <a class="reference external" href="http://www.tacc.utexas.edu/tacc-projects/mclay/lmod">module</a> and <a class="reference external" href="http://www.mcs.anl.gov/hs/software/systems/softenv/softenv-intro.html">soft</a>. If neither of these is available on your machine, simply set <code class="docutils literal"><span class="pre">&lt;module_system</span> <span class="pre">type=&quot;none&quot;\&gt;</span></code>.</p>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">environment_variables</span></code>: environment_variables to set on the system</dt>
<dd><p class="first">This contains sub-elements <code class="docutils literal"><span class="pre">&lt;env&gt;</span></code> with the <code class="docutils literal"><span class="pre">name</span></code> attribute specifying the environment variable name, and the element value specifying the corresponding environment variable value. If the element value is not set, the corresponding environment variable will be unset in your shell.</p>
<p>For example, the following sets the environment variable <code class="docutils literal"><span class="pre">OMP_STACKSIZE</span></code> to 256M:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">env</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;OMP_STACKSIZE&quot;</span><span class="o">&gt;</span><span class="mi">256</span><span class="n">M</span><span class="o">&lt;/</span><span class="n">env</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>The following unsets this environment variable in the shell:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">env</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;OMP_STACKSIZE&quot;</span><span class="o">&gt;&lt;/</span><span class="n">env</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These changes are <strong>ONLY</strong> activated for the CIME build and run environment, <strong>BUT NOT</strong> for your login shell. To activate them for your login shell, source either <strong>$CASEROOT/.env_mach_specific.sh</strong> or <strong>$CASEROOT/.env_mach_specific.csh</strong>, depending on your shell.</p>
</div>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="config-compilers-xml-compiler-paths-and-options">
<span id="customizing-compiler-file"></span><h2>3.4. config_compilers.xml - compiler paths and options<a class="headerlink" href="#config-compilers-xml-compiler-paths-and-options" title="Permalink to this headline">¶</a></h2>
<p>The <strong>config_compilers.xml</strong> file defines compiler flags for building CIME (and also CESM and E3SM prognostic CIME-driven components).</p>
<ol class="arabic simple">
<li>General compiler flags (e.g., for the gnu compiler) that are machine- and componen-independent are listed first.</li>
<li>Compiler flags specific to a particular operating system are listed next.</li>
<li>Compiler flags that are specific to particular machines are listed next.</li>
<li>Compiler flags that are specific to particular CIME-driven components are listed last.</li>
</ol>
<p>The order of listing is a convention and not a requirement.</p>
<p>The possible elements and attributes that can exist in the file are documented in <strong>$CIME/config/xml_schemas/config_compilers_v2.xsd</strong>.</p>
<p>To clarify several conventions:</p>
<ul>
<li><p class="first">The <code class="docutils literal"><span class="pre">&lt;append&gt;</span></code> element implies that any previous definition of that element&#8217;s parent will be appended with the new element value.
As an example, the following entry in <strong>config_compilers.xml</strong> would append the value of <code class="docutils literal"><span class="pre">CPPDEFS</span></code> with <code class="docutils literal"><span class="pre">-D</span> <span class="pre">$OS</span></code> where <code class="docutils literal"><span class="pre">$OS</span></code> is the environment value of <code class="docutils literal"><span class="pre">OS</span></code>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">compiler</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">CPPDEFS</span><span class="o">&gt;</span>
       <span class="o">&lt;</span><span class="n">append</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">D</span><span class="o">&lt;</span><span class="n">env</span><span class="o">&gt;</span><span class="n">OS</span><span class="o">&lt;/</span><span class="n">env</span><span class="o">&gt;</span> <span class="o">&lt;/</span><span class="n">append</span><span class="o">&gt;</span>
   <span class="o">&lt;/</span><span class="n">CPPDEFS</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">compiler</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">&lt;base&gt;</span></code> element overwrites its parent element&#8217;s value. For example, the following entry would overwrite the <code class="docutils literal"><span class="pre">CONFIG_ARGS</span></code> for machine <code class="docutils literal"><span class="pre">melvin</span></code> with a <code class="docutils literal"><span class="pre">gnu</span></code> compiler to be <code class="docutils literal"><span class="pre">--host=Linux</span></code>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">compiler</span> <span class="n">MACH</span><span class="o">=</span><span class="s2">&quot;melvin&quot;</span> <span class="n">COMPILER</span><span class="o">=</span><span class="s2">&quot;gnu&quot;</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">CONFIG_ARGS</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">base</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">host</span><span class="o">=</span><span class="n">Linux</span> <span class="o">&lt;/</span><span class="n">base</span><span class="o">&gt;</span>
   <span class="o">&lt;/</span><span class="n">CONFIG_ARGS</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">compiler</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="config-batch-xml-batch-directives">
<span id="customizing-batch-file"></span><h2>3.5. config_batch.xml - batch directives<a class="headerlink" href="#config-batch-xml-batch-directives" title="Permalink to this headline">¶</a></h2>
<p>The <strong>config_batch.xml</strong> schema is defined in <strong>$CIMEROOT/config/xml_schemas/config_batch.xsd</strong>.</p>
<p>CIME supports these batch systems: pbs, cobalt, lsf and slurm.</p>
<p>As is the case for <strong>config_compilers.xml</strong>, the entries in <strong>config_batch.xml</strong> are hierarchical.</p>
<ol class="arabic simple">
<li>General configurations for each system are provided at the top of the file.</li>
<li>Specific modifications for a given machine are provided below.  In particular each machine should define its own queues.</li>
<li>Following is a machine-specific queue section.  This section details the parameters for each queue on the target machine.</li>
<li>The last section describes several things:<ul>
<li>each job that will be submitted to the queue for a CIME workflow,</li>
<li>the template file that will be used to generate that job,</li>
<li>the prerequisites that must be met before the job is submitted, and</li>
<li>the dependencies that must be satisfied before the job is run.</li>
</ul>
</li>
</ol>
<p>By default the CIME workflow consists of two jobs (<strong>case.run</strong>, <strong>case.st_archive</strong>).</p>
<p>In addition, there is <strong>case.test</strong> job that is used by the CIME system test workflow.</p>
</div>
<div class="section" id="validating-your-port">
<h2>3.6. Validating your port<a class="headerlink" href="#validating-your-port" title="Permalink to this headline">¶</a></h2>
<p>The following port validation is recommended for any new machine.
Carrying out these steps does not guarantee the model is running properly in all cases nor that the model is scientifically valid on the new machine.</p>
<p>In addition to these tests, detailed validation should be carried out for any new production run.
That means verifying that model restarts are bit-for-bit identical with a baseline run, that the model is bit-for-bit reproducible when identical cases are run for several months, and that production cases are monitored carefully as they integrate forward to identify any potential problems as early as possible. Users are responsible for their own validation process, especially with respect to science validation.</p>
<p>These are the recommended steps for validating a port:</p>
<ol class="arabic simple">
<li>Verify functionality by performing these <a class="reference external" href="http://www.cesm.ucar.edu/models/cesm2.0/external-link-here">functionality tests</a>:</li>
</ol>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ERS_D</span><span class="o">.</span><span class="n">f19_g16</span><span class="o">.</span><span class="n">X</span>
<span class="n">ERS_D</span><span class="o">.</span><span class="n">T31_g37</span><span class="o">.</span><span class="n">A</span>
<span class="n">ERS_D</span><span class="o">.</span><span class="n">f19_g16</span><span class="o">.</span><span class="n">B1850CN</span>
<span class="n">ERI</span><span class="o">.</span><span class="n">ne30_g16</span><span class="o">.</span><span class="n">X</span>
<span class="n">ERI</span><span class="o">.</span><span class="n">T31_g37</span><span class="o">.</span><span class="n">A</span>
<span class="n">ERI</span><span class="o">.</span><span class="n">f19_g16</span><span class="o">.</span><span class="n">B1850CN</span>
<span class="n">ERS</span><span class="o">.</span><span class="n">ne30_ne30</span><span class="o">.</span><span class="n">F</span>
<span class="n">ERS</span><span class="o">.</span><span class="n">f19_g16</span><span class="o">.</span><span class="n">I</span>
<span class="n">ERS</span><span class="o">.</span><span class="n">T62_g16</span><span class="o">.</span><span class="n">C</span>
<span class="n">ERS</span><span class="o">.</span><span class="n">T62_g16</span><span class="o">.</span><span class="n">DTEST</span>
<span class="n">ERT</span><span class="o">.</span><span class="n">ne30_g16</span><span class="o">.</span><span class="n">B1850CN</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>Verify performance and scaling analysis.<ol class="loweralpha">
<li>Create one or two <a class="reference external" href="http://www.cesm.ucar.edu/models/cesm2.0/external-link-here">load-balanced</a> configurations to check into <code class="docutils literal"><span class="pre">Machines/config_pes.xml</span></code> for the new machine.</li>
<li>Verify that performance and scaling are reasonable.</li>
<li>Review timing summaries in <code class="docutils literal"><span class="pre">$CASEROOT</span></code> for load balance and throughput.</li>
<li>Review coupler &#8220;daily&#8221; timing output for timing inconsistencies.
As mentioned in <a class="reference external" href="http://www.cesm.ucar.edu/models/cesm2.0/external-link-here">load balancing a case</a>, useful timing information is contained in a <strong>cpl.log.$date</strong> file that is produced for every run.
The file contains the run time for each model day during the model run.
This diagnostic is output as the model runs.
Searc for <code class="docutils literal"><span class="pre">tStamp</span></code> in this file to see this information.
The timing information is useful for tracking down temporal variability in model cost due to either inherent model variability cost (I/O, spin-up, seasonal, and so on) or hardware.
The model daily cost generally is pretty constant unless I/O is written intermittently, such as at the end of the month.</li>
</ol>
</li>
<li>Perform validation (both functional and scientific):<ol class="loweralpha">
<li>Perform a new CIME validation test (<strong>TODO: fill this in</strong>)</li>
<li>Follow the <a class="reference external" href="http://www.cesm.ucar.edu/models/cesm2.0/external-link-here">CCSM4.0 CICE port-validation procedure</a>.</li>
<li>Follow the <a class="reference external" href="http://www.cesm.ucar.edu/models/cesm2.0/external-link-here">CCSM4.0 POP2 port-validation procedure</a>.</li>
</ol>
</li>
<li>Perform two, one-year runs (using the expected load-balanced configuration) as separate job submissions and verify that atmosphere history files are BFB for the last month.
Do this after some performance testing is complete; you can also combine this with the production test by running the first year as a single run and the second year as a multi-submission production run.
This will test reproducibility, exact restart over the one-year timescale, and production capability all in one test.</li>
<li>Carry out a 20- to 30-year 1.9x2.5_gx1v6 resolution, B_1850_CN compset simulation and compare the results with the diagnostics plots for the 1.9x2.5_gx1v6 Pre-Industrial Control (see the <a class="reference external" href="http://www.cesm.ucar.edu/models/cesm2.0/external-link-here">CCSM4.0 diagnostics</a>).
Model output data for these runs will be available on the <a class="reference external" href="http://www.cesm.ucar.edu/models/cesm2.0/external-link-here">Earth System Grid (ESG)</a> as well.</li>
</ol>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">3. Porting and validating CIME on a new platform</a><ul>
<li><a class="reference internal" href="#required-libraries-packages">3.1. Required libraries/packages</a></li>
<li><a class="reference internal" href="#steps-for-porting">3.2. Steps for porting</a></li>
<li><a class="reference internal" href="#config-machines-xml-machine-specific-file">3.3. config_machines.xml - machine specific file</a></li>
<li><a class="reference internal" href="#config-compilers-xml-compiler-paths-and-options">3.4. config_compilers.xml - compiler paths and options</a></li>
<li><a class="reference internal" href="#config-batch-xml-batch-directives">3.5. config_batch.xml - batch directives</a></li>
<li><a class="reference internal" href="#validating-your-port">3.6. Validating your port</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="creating-new-compsets.html"
                        title="previous chapter">2. Creating New Compsets</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="optimizing-processor-layout.html"
                        title="next chapter">4. Optimizing Processor Layout</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/users_guide/porting-cime.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="optimizing-processor-layout.html" title="4. Optimizing Processor Layout"
             >next</a> |</li>
        <li class="right" >
          <a href="creating-new-compsets.html" title="2. Creating New Compsets"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CIME 5.4.0 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >CIME User&#8217;s Guide Part 1: Beginner - Basic Usage</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2017, U.S. National Science Foundation and U.S. Department of Energy.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.3.
    </div>
  </body>
</html>